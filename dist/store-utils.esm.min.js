var y=class{#e;#t;constructor(e,t,s){this.#t=e,this.#e=t,this.value=s}set value(e){this.#t.setItem(this.#e,e)}get value(){return this.#t.getItem(this.#e)}get name(){return this.#e}subscribe(e,t){return this.#t.subscribe(this.#e,e,t)}clearSubscribers(){return this.#t.clearItemSubscribers(this.#e)}hasSubscribers(){return this.#t.hasSubscribers(this.#e)}setCompareFunction(e){return this.#t.setCompareFunction(this.#e,e)}get store(){return this.#t}onHasSubscribers(e){return this.#t.onHasSubscribers(this.#e,e)}onNoSubscribers(e){return this.#t.onNoSubscribers(this.#e,e)}};function V(r,e){var t,s=(...i)=>{var n=this,a=function(){t=null,r.apply(n,i)};clearTimeout(t),t=setTimeout(a,e)};return s}function D(r){return typeof r=="object"&&!Array.isArray(r)&&r!==null}var I=class{#e;#t;constructor(e,t,s){this.#t=e,this.#e=t,typeof s<"u"&&this.#t.createCollectionItem(this.#e,s)}set value(e){this.#t.setItem(this.#e,e)}get value(){return this.#t.getItem(this.#e)}set content(e){this.#t.setItem(this.#e,e)}get content(){return this.#t.getItem(this.#e)}get name(){return this.#e}subscribe(e,t){return this.#t.subscribe(this.#e,e,t)}clearSubscribers(){return this.#t.clearItemSubscribers(this.#e)}hasSubscribers(){return this.#t.hasSubscribers(this.#e)}get store(){return this.#t}updateItemValue(e,t){var s=this.#t.getItem(this.#e),i;D(s[e])?i={...s[e],...t}:i=t,s[e]=i}onHasSubscribers(e){return this.#t.onHasSubscribers(this.#e,e)}onNoSubscribers(e){return this.#t.onNoSubscribers(this.#e,e)}},E=class{#e;#t;constructor(e,t,s,i={}){this.#t=e,this.#e=t,typeof s<"u"&&this.#t.createComputedItem(this.#e,s,i)}get value(){return this.#t.getItem(this.#e)}get name(){return this.#e}subscribe(e,t){return this.#t.subscribe(this.#e,e,t)}clearSubscribers(){return this.#t.clearItemSubscribers(this.#e)}hasSubscribers(){return this.#t.hasSubscribers(this.#e)}recalc(){return this.#t.recalcComputed(this.#e)}get store(){return this.#t}onHasSubscribers(e){return this.#t.onHasSubscribers(this.#e,e)}onNoSubscribers(e){return this.#t.onNoSubscribers(this.#e,e)}};var p={debounce_time:0,autodisconnect:!1};function k(r,e,t){e[t.property_name]=String(r.value)}function _(r,e,t={}){let s=Object.assign({},p,t),{debounce_time:i}=s,n={property_name:"textContent"};k(r,e,n);var a=r.subscribe(h=>{if(s.autodisconnect&&!e.isConnected){a();return}k(r,e,n)},i);return a}function L(r,e,t,s={},i={}){let n=Object.assign({},p,i),{debounce_time:a}=n;t(r,e,s,n);var h=r.subscribe(u=>{if(n.autodisconnect&&!e.isConnected){h();return}t(r,e,s,n)},a);return h}function z(r,e,t){e[t.property_name]=r.value}function j(r,e,t,s={}){let i=Object.assign({},p,s);return L(r,e,z,{property_name:t},i)}function q(r,e,t={}){return j(r,e,"innerHTML",t)}function fe(r,e,t={}){return j(r,e,"className",t)}function J(r,e,t,s){let{remove_class_flag:i}=s;var n=!!r.value;console.warn(e.className,"show",n,"remove_class_flag",i,t.cssClassName),i==!1?e.classList.toggle(t.cssClassName,n):e.classList.toggle(t.cssClassName,!n)}function R(r,e,t,s={}){let i=Object.assign({},p,{remove_class_flag:!1},s);return L(r,e,J,{cssClassName:t},i)}function Y(r,e,t={}){let s=Object.assign({},p,{remove_class_flag:!0,hide_class_name:"d-none"},t),{hide_class_name:i}=s;return R(r,e,i,s)}function B(r,e,t){typeof r.value=="string"?e.setAttribute(t.attribute_name,r.value):r.value==null&&e.removeAttribute(t.attribute_name)}function Z(r,e,t,s={}){let i=Object.assign({},p,s);return L(r,e,B,{attribute_name:t},i)}function de(r,e,t={}){let s=Object.assign({},p,t),{debounce_time:i}=s;function n(o){e.checked=o}var a=o=>{r.value=e.checked};n(r.value),e.addEventListener("change",a);var h=r.subscribe(o=>{if(s.autodisconnect&&!e.isConnected){u();return}n(o.value)},i),u=()=>{e.removeEventListener("change",a),h()};return u}function ve(r,e,t={}){let s=Object.assign({},p,{lazy:!1},t),{debounce_time:i,lazy:n}=s;e.type=="number"&&(n=!0);function a(o){e.value!=o&&(e.type=="number"?e.value=parseFloat(o.toString()).toString():e.value=String(o))}var h=V(o=>{let l=e.value;e.type=="number"?r.value=parseFloat(l):r.value=String(l)},i);e.addEventListener(n?"change":"input",h),a(r.value);var u=r.subscribe(o=>{if(s.autodisconnect&&!e.isConnected){u();return}a(o.value)},i);return()=>{e.removeEventListener("input",h),u()}}function K(r,e,t){var s={};for(let i in r)typeof i=="string"&&(e&&e.hasOwnProperty(i)?s[i]=t?t(r[i],e[i]):r[i]!==e[i]:s[i]=!0);return s}var x="item-index",T=class{#e;#t;#i;#s;#r;constructor(e,t,s,i){if(this.#t=e,this.#e=t,this.#r=new N(this.#n()),this.#e.innerHTML="",i)this.#s=()=>i(this.#r);else if(this.#r.hasTemplate())this.#s=()=>{let n=this.#r.getTemplate();if(n==null)throw new Error("template is not set");return n};else throw new Error("element_item_creator or template is not set");this.setElementItemValueSetter(s),this.setData(this.#t.value)}#n(){let e=this.#e.firstElementChild;if(e)return e.cloneNode(!0);e=null}removeElementListItem(e){this.#e.children.item(e)?.remove()}removeLastElementListItem(){this.#e.lastElementChild?.remove()}setElementItemValue(e,t,s){var i=this.#e.children.item(e);if(!i)return;i.setAttribute(x,String(e));let n=new A(i,e,t,s,this.#t.value.length);this.#i(this.#r,n)}setData(e){this.setElementListSize(e.length);for(let t=0;t<e.length;t++)this.setElementItemValue(t,e[t],void 0)}setElementItemValueSetter(e){this.#i=e}setElementListSize(e){let s=this.#e.children.length;if(s!==e)if(s<e)for(let i=s;i<e;i++)this.appendElementListItem(this.#t.value[i],i);else for(let i=e;i<s;i++)this.removeLastElementListItem()}appendElementListItem(e,t){var s=this.#s(this.#r);this.#e.append(s),this.setElementItemValue(t,e,void 0)}};function H(r,e){var t=e||x,s=r.getAttribute(t);return s!==null?r:r.closest(`[${t}]`)}function W(r){var e=H(r);if(!e)return-1;var t=e.getAttribute(x);return t===null?-1:parseInt(t)}var A=class{item_element;index;value;old_value;length;constructor(e,t,s,i,n){this.item_element=e,this.index=t,this.value=s,this.old_value=i,this.length=n}},N=class{#e=null;constructor(e){e&&(this.#e=e)}hasTemplate(){return this.#e!=null}getTemplate(){return this.#e==null?null:this.#e.cloneNode(!0)}getListItemIndex(e){return W(e)}getListItem(e,t){return H(e,t)}getDiffs(e,t,s){return K(e,t,s)}};function be(r,e,t,s,i={}){var n=new T(r,e,t,s),a=Object.assign({},p,i),h=r.subscribe(u=>{if(a.autodisconnect&&!e.isConnected){h();return}if(u.property===null){n.setData(u.value);return}if(u.property=="length"){n.setElementListSize(r.value.length);return}var o=parseInt(u.property);isNaN(o)||(u.eventType=="set"&&n.setElementItemValue(o,u.value,u.old_value),u.eventType=="delete"&&n.removeElementListItem(o))},0);return h}function G(r,e,t={}){return j(r,e,"disabled",t)}function ge(r,e,t={}){let s=Object.assign({},p,t),{debounce_time:i}=s;var n={};for(let o=0;o<e.length;o++)n[e[o].value]=e[o];function a(){let o=r.value;for(let l=0;l<e.length;l++){let f=e[l].value;n[f].checked=o.indexOf(f)>-1}}var h=()=>{let o=[];for(let l=0;l<e.length;l++)e[l].checked&&o.push(e[l].value);r.value=o};for(let o=0;o<e.length;o++)e[o].addEventListener("change",h);var u=r.subscribe(o=>{if(s.autodisconnect&&!e[0].isConnected){u();return}a()},i);return()=>{for(let o=0;o<e.length;o++)e[o].removeEventListener("change",h);u()}}function pe(r,e,t){let s=Object.assign({},p,t),{debounce_time:i}=s;if(e.length===0)return()=>{};let n=e[0].name||"";if(n=="")return()=>{};var a={};for(let l=0;l<e.length;l++)e[l].name==n&&e[l].value!=""&&(a[e[l].value]=e[l]);function h(l){a[l]&&(a[l].checked=!0)}h(r.value);var u=l=>{let f=l.target;f&&(r.value=f.value)};for(let l=0;l<e.length;l++)e[l].addEventListener("change",u);var o=r.subscribe(l=>{if(s.autodisconnect&&!e[0].isConnected){o();return}h(l.value)},i);return()=>{for(let l=0;l<e.length;l++)e[l].removeEventListener("change",u);o()}}function me(r,e,t={}){let s=Object.assign({},p,t),{debounce_time:i}=s;function n(){var u=r.value,o={},l=e.options;for(let f=0;f<l.length;f++)o[l[f].value]=l[f];for(let f=0;f<u.length;f++)o[u[f]]&&(o[u[f]].selected||(o[u[f]].selected=!0))}n();var a=u=>{r.value=Array.from(e.selectedOptions).map(o=>o.value)};e.addEventListener("change",a);var h=r.subscribe(u=>{if(s.autodisconnect&&!e.isConnected){h();return}if(typeof u.property=="string"&&/^\d+$/.test(u.property)){if(u.eventType=="delete"){let l=e.options[u.property];l&&l.selected&&(l.selected=!1)}if(u.eventType=="set"){let l=e.options[u.property];l&&!l.selected&&(l.selected=!0)}}else if(u.eventType=="set"){var o=e.options;for(let l=0;l<o.length;l++){let f=e.options[l];f.selected=r.value.indexOf(f.value)!=-1}}n()},i);return()=>{e.removeEventListener("change",a),h()}}function we(r,e,t={}){let s=Object.assign({},p,t),{debounce_time:i}=s;function n(u){e.value=u}n(r.value);var a=u=>{r.value=e.value};e.addEventListener("change",a);var h=r.subscribe(u=>{if(s.autodisconnect&&!e.isConnected){h();return}n(u.value)},i);return()=>{e.removeEventListener("change",a),h()}}var O=class{root;unsubscribe;refs;constructor(e,t,s){this.root=e,this.unsubscribe=t,this.refs=s}};function Q(r,e){let t=[],s=/\{{(\d+)}}/,i=r;for(;s.test(i);){let n=s.exec(i);if(!n)break;let a=n[1];t.push({content:i.slice(0,n.index),reactive:null}),i=i.slice(n.index+n[0].length);let h=e.get(parseInt(a));h?t.push({content:String(h.value),reactive:h}):t.push({content:"{{"+a+"}}",reactive:null})}return t.push({content:i,reactive:null}),t}function X(r){return r!==null&&!ee(r)&&typeof r=="object"}function ee(r){return Array.isArray(r)}function ye(r={}){return te.bind(r)}function te(r,...e){let t=X(this)?this:{},s=new Map,i=[],n=Array.from(r),a=[],h={};n[0]=r[0].trimStart(),n[n.length-1]=r[n.length-1].trimEnd();for(let c=0;c<n.length;c++)if(i.push(n[c]),e[c]!=null)if(e[c]instanceof y||e[c]instanceof E||e[c]instanceof I){let m=e[c];s.set(c,m),i.push(`{{${c}}}`)}else i.push(String(e[c]));let u=t.document||globalThis.document,o=i.join("").trim(),l=u.createElement("template");if(l.innerHTML=o,l.content.childNodes.length>1)throw new Error("Template literal contains multiple nodes");if(l.content.childNodes.length==0)throw new Error("Template literal contains no nodes");let f=u.importNode(l.content.childNodes[0],!0),P=u.createTreeWalker(f,5),w,C=[],S=[];for(;w=P.nextNode();)if(w.nodeType==3){if(w.textContent!==null){let c=Q(w.textContent,s);C.push({node:w,textNodes:c})}}else if(w.nodeType==1){let c=w;for(let m=0;m<c.attributes.length;m++){let g=c.attributes[m];if(g.name=="ref"){h[g.value]=c;continue}g.value.match(/^\{\{(\d+)\}\}$/)&&(g.value=g.value.replace(/\{\{(\d+)\}\}/,(d,b)=>{let v=s.get(parseInt(b));return v&&S.push({node:c,attribute:g,reactive:v}),"{{"+b+"}}"}))}}for(let c=0;c<C.length;c++){let{node:m,textNodes:g}=C[c];for(let d=0;d<g.length;d++){let b=u.createTextNode(g[d].content),v=g[d].reactive;if(v!=null){if(g[d].reactive!=null){if(!(typeof v.value=="string"||typeof v.value=="number"))throw new Error("reactive variable must be a string for text binding");let U=_(v,b,t);a.push(U)}m.parentNode?.insertBefore(b,m)}}m.parentNode?.removeChild(m)}for(let c=0;c<S.length;c++){let{node:m,attribute:g,reactive:d}=S[c],b=m;if(d!=null)switch(g.name){case"v-text":{if(!(typeof d.value=="string"||typeof d.value=="number"))throw new Error("v-text can only be used with strings");let v=_(d,b,t);a.push(v),b.removeAttribute("v-text");break}case"v-html":{if(typeof d.value!="string")throw new Error("v-html can only be used with strings");let v=q(d,b,t);a.push(v),b.removeAttribute("v-html");break}case"v-show":{if(typeof d.value!="boolean")throw new Error("v-show can only be used with booleans");let v=Y(d,b,t);a.push(v),b.removeAttribute("v-show");break}case"v-disabled":{if(typeof d.value!="boolean")throw new Error("v-disabled can only be used with booleans");let v=G(d,b,t);a.push(v),b.removeAttribute("v-disabled");break}default:{if(!(d.value==null||typeof d.value=="string"))throw new Error("reactive variable must be a string for attribute binding");let v=Z(d,b,g.name,t);a.push(v)}}}let M=f,F=()=>{for(let c=0;c<a.length;c++)a[c]()};return new O(M,F,h)}export{O as Fragment,N as ListItemHelper,A as ListItemSetterDetails,Z as bindToAttr,de as bindToCheckbox,ge as bindToCheckboxValues,fe as bindToClassName,R as bindToCssClass,G as bindToDisabled,q as bindToHtml,ve as bindToInputValue,be as bindToList,me as bindToMultipleSelect,j as bindToProperty,pe as bindToRadios,we as bindToSelectElement,Y as bindToShow,_ as bindToText,ye as createCustomTaggedTemplate,K as getDiffs,p as globalOptions,te as html};
